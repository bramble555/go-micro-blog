{{ define "content" }}
<div class="container mx-auto py-8" style="max-width: 1000px; margin: 0 auto;">
    <div style="margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center;">
        <h1 style="font-size: 28px; font-weight: 800; color: #1f2937;">最新文章</h1>

        <div id="auth-zone" style="display: flex; gap: 10px;">
            <a href="/admin/login"
                style="background-color: #3b82f6; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 14px;">
                管理员登录
            </a>
        </div>
    </div>

    <hr style="border: 0; border-top: 1px solid #e5e7eb; margin-bottom: 20px;">

    <div class="grid gap-6">
        {{ range .Posts }}
        <div
            style="background: white; border: 1px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-top: 15px; transition: shadow 0.3s; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">
            <h2 style="font-size: 20px; font-weight: 700; color: #111827; margin-bottom: 8px;">{{ .Title }}</h2>
            <p style="color: #4b5563; line-height: 1.6; margin-bottom: 12px;">{{ .Summary }}</p>
            <div style="font-size: 13px; color: #9ca3af;">发布日期：{{ .Date }}</div>
        </div>
        {{ else }}
        <div style="text-align: center; padding: 40px; color: #6b7280;">
            <p>暂时没有文章，快去发布吧！</p>
        </div>
        {{ end }}
    </div>
</div>

<script>
    // 页面加载完成后立即执行
    document.addEventListener('DOMContentLoaded', function () {
        const token = localStorage.getItem('token');
        const authZone = document.getElementById('auth-zone');

        if (token) {
            // 如果存在 Token，动态替换为“管理员视图”
            authZone.innerHTML = `
                <a href="/admin/create"
                    style="background-color: #10b981; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 14px;">
                    + 发布新文章
                </a>
                <button onclick="logout()"
                    style="background-color: #ef4444; color: white; padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; font-size: 14px;">
                    退出登录
                </button>
            `;
        }
    });

    function logout() {
        localStorage.removeItem('token');
        alert('已退出登录');
        window.location.href = '/';
    }
</script>
{{ end }}